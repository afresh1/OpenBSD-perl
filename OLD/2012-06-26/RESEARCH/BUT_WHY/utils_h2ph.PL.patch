diff -Nrux *.orig ../perl-5.16.0.orig/t/lib/h2ph.pht ./t/lib/h2ph.pht
--- ../perl-5.16.0.orig/t/lib/h2ph.pht	Tue Feb 14 21:44:51 2012
+++ ./t/lib/h2ph.pht	Mon Jun  4 02:25:29 2012
@@ -90,10 +90,6 @@
     }
     eval("sub flim () { 0; }") unless defined(&flim);
     eval("sub flam () { 1; }") unless defined(&flam);
-    eval 'sub blli_in_use {
-        my($blli) = @_;
-	    eval q({  ($blli->{l2_proto}) ||  ($blli->{l3_proto}); });
-    }' unless defined(&blli_in_use);
     eval 'sub multiline () {"multilinestring";}' unless defined(&multiline);
 }
 1;
diff -Nrux *.orig ../perl-5.16.0.orig/utils/h2ph.PL ./utils/h2ph.PL
--- ../perl-5.16.0.orig/utils/h2ph.PL	Tue Apr 24 17:18:36 2012
+++ ./utils/h2ph.PL	Mon Jun  4 02:25:29 2012
@@ -571,7 +571,7 @@
                 $in =~ s/\?\?</{/g;                         # | ??<|  {|
                 $in =~ s/\?\?>/}/g;                         # | ??>|  }|
             }
-	    if ($in =~ /^\#ifdef __LANGUAGE_PASCAL__/) {
+	    if ($in =~ s/^\#ifdef __LANGUAGE_PASCAL__//) {
 		# Tru64 disassembler.h evilness: mixed C and Pascal.
 		while (<IN>) {
 		    last if /^\#endif/;
@@ -579,8 +579,8 @@
 		$in = "";
 		next READ;
 	    }
-	    if ($in =~ /^extern inline / && # Inlined assembler.
-		$^O eq 'linux' && $file =~ m!(?:^|/)asm/[^/]+\.h$!) {
+	    # Skip inlined functions in headers
+	    if ($in =~ s/^(extern|static) (__inline__|inline) .*[^;]\s*$//) {
 		while (<IN>) {
 		    last if /^}/;
 		}
